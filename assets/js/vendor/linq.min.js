Enumerable=function(){var a="Single:sequence contains more than one element.",b=!0,c=null,d=!1,e=function(a){this.GetEnumerator=a};e.Choice=function(){var a=arguments[0]instanceof Array?arguments[0]:arguments;return new e(function(){return new j(f.Blank,function(){return this.Yield(a[Math.floor(Math.random()*a.length)])},f.Blank)})},e.Cycle=function(){var a=arguments[0]instanceof Array?arguments[0]:arguments;return new e(function(){var b=0;return new j(f.Blank,function(){return b>=a.length&&(b=0),this.Yield(a[b++])},f.Blank)})},e.Empty=function(){return new e(function(){return new j(f.Blank,function(){return d},f.Blank)})},e.From=function(a){if(a==c)return e.Empty();if(a instanceof e)return a;if(typeof a==g.Number||typeof a==g.Boolean)return e.Repeat(a,1);if(typeof a==g.String)return new e(function(){var b=0;return new j(f.Blank,function(){return b<a.length?this.Yield(a.charAt(b++)):d},f.Blank)});if(typeof a!=g.Function){if(typeof a.length==g.Number)return new n(a);if(!(a instanceof Object)&&h.IsIEnumerable(a))return new e(function(){var c,e=b;return new j(function(){c=new Enumerator(a)},function(){return e?e=d:c.moveNext(),c.atEnd()?d:this.Yield(c.item())},f.Blank)})}return new e(function(){var b=[],c=0;return new j(function(){for(var c in a)!(a[c]instanceof Function)&&b.push({Key:c,Value:a[c]})},function(){return c<b.length?this.Yield(b[c++]):d},f.Blank)})},e.Return=function(a){return e.Repeat(a,1)},e.Matches=function(a,b,g){return g==c&&(g=""),b instanceof RegExp&&(g+=b.ignoreCase?"i":"",g+=b.multiline?"m":"",b=b.source),-1===g.indexOf("g")&&(g+="g"),new e(function(){var c;return new j(function(){c=new RegExp(b,g)},function(){var b=c.exec(a);return b?this.Yield(b):d},f.Blank)})},e.Range=function(a,b,d){return d==c&&(d=1),e.ToInfinity(a,d).Take(b)},e.RangeDown=function(a,b,d){return d==c&&(d=1),e.ToNegativeInfinity(a,d).Take(b)},e.RangeTo=function(a,b,d){return d==c&&(d=1),b>a?e.ToInfinity(a,d).TakeWhile(function(a){return b>=a}):e.ToNegativeInfinity(a,d).TakeWhile(function(a){return a>=b})},e.Repeat=function(a,b){return b!=c?e.Repeat(a).Take(b):new e(function(){return new j(f.Blank,function(){return this.Yield(a)},f.Blank)})},e.RepeatWithFinalize=function(a,b){return a=h.CreateLambda(a),b=h.CreateLambda(b),new e(function(){var d;return new j(function(){d=a()},function(){return this.Yield(d)},function(){d!=c&&(b(d),d=c)})})},e.Generate=function(a,b){return b!=c?e.Generate(a).Take(b):(a=h.CreateLambda(a),new e(function(){return new j(f.Blank,function(){return this.Yield(a())},f.Blank)}))},e.ToInfinity=function(a,b){return a==c&&(a=0),b==c&&(b=1),new e(function(){var c;return new j(function(){c=a-b},function(){return this.Yield(c+=b)},f.Blank)})},e.ToNegativeInfinity=function(a,b){return a==c&&(a=0),b==c&&(b=1),new e(function(){var c;return new j(function(){c=a+b},function(){return this.Yield(c-=b)},f.Blank)})},e.Unfold=function(a,c){return c=h.CreateLambda(c),new e(function(){var e,g=b;return new j(f.Blank,function(){return g?(g=d,e=a,this.Yield(e)):(e=c(e),this.Yield(e))},f.Blank)})},e.prototype={CascadeBreadthFirst:function(a,c){var f=this;return a=h.CreateLambda(a),c=h.CreateLambda(c),new e(function(){var g,i=0,k=[];return new j(function(){g=f.GetEnumerator()},function(){for(;b;){if(g.MoveNext())return k.push(g.Current()),this.Yield(c(g.Current(),i));var f=e.From(k).SelectMany(function(b){return a(b)});if(!f.Any())return d;i++,k=[],h.Dispose(g),g=f.GetEnumerator()}},function(){h.Dispose(g)})})},CascadeDepthFirst:function(a,c){var f=this;return a=h.CreateLambda(a),c=h.CreateLambda(c),new e(function(){var g,i=[];return new j(function(){g=f.GetEnumerator()},function(){for(;b;){if(g.MoveNext()){var f=c(g.Current(),i.length);return i.push(g),g=e.From(a(g.Current())).GetEnumerator(),this.Yield(f)}if(i.length<=0)return d;h.Dispose(g),g=i.pop()}},function(){try{h.Dispose(g)}finally{e.From(i).ForEach(function(a){a.Dispose()})}})})},Flatten:function(){var a=this;return new e(function(){var g,i=c;return new j(function(){g=a.GetEnumerator()},function(){for(;b;){if(i!=c){if(i.MoveNext())return this.Yield(i.Current());i=c}if(g.MoveNext()){if(g.Current()instanceof Array){h.Dispose(i),i=e.From(g.Current()).SelectMany(f.Identity).Flatten().GetEnumerator();continue}return this.Yield(g.Current())}return d}},function(){try{h.Dispose(g)}finally{h.Dispose(i)}})})},Pairwise:function(a){var b=this;return a=h.CreateLambda(a),new e(function(){var c;return new j(function(){c=b.GetEnumerator(),c.MoveNext()},function(){var b=c.Current();return c.MoveNext()?this.Yield(a(b,c.Current())):d},function(){h.Dispose(c)})})},Scan:function(a,f,g){if(g!=c)return this.Scan(a,f).Select(g);var i;f==c?(f=h.CreateLambda(a),i=d):(f=h.CreateLambda(f),i=b);var k=this;return new e(function(){var c,e,g=b;return new j(function(){c=k.GetEnumerator()},function(){if(g){if(g=d,i)return this.Yield(e=a);if(c.MoveNext())return this.Yield(e=c.Current())}return c.MoveNext()?this.Yield(e=f(e,c.Current())):d},function(){h.Dispose(c)})})},Select:function(a){var b=this;return a=h.CreateLambda(a),new e(function(){var c,e=0;return new j(function(){c=b.GetEnumerator()},function(){return c.MoveNext()?this.Yield(a(c.Current(),e++)):d},function(){h.Dispose(c)})})},SelectMany:function(a,b){var f=this;return a=h.CreateLambda(a),b==c&&(b=function(a,b){return b}),b=h.CreateLambda(b),new e(function(){var g,i=void 0,k=0;return new j(function(){g=f.GetEnumerator()},function(){if(void 0===i&&!g.MoveNext())return d;do{if(i==c){var f=a(g.Current(),k++);i=e.From(f).GetEnumerator()}if(i.MoveNext())return this.Yield(b(g.Current(),i.Current()));h.Dispose(i),i=c}while(g.MoveNext());return d},function(){try{h.Dispose(g)}finally{h.Dispose(i)}})})},Where:function(a){a=h.CreateLambda(a);var b=this;return new e(function(){var c,e=0;return new j(function(){c=b.GetEnumerator()},function(){for(;c.MoveNext();)if(a(c.Current(),e++))return this.Yield(c.Current());return d},function(){h.Dispose(c)})})},OfType:function(a){var b;switch(a){case Number:b=g.Number;break;case String:b=g.String;break;case Boolean:b=g.Boolean;break;case Function:b=g.Function;break;default:b=c}return b===c?this.Where(function(b){return b instanceof a}):this.Where(function(a){return typeof a===b})},Zip:function(a,b){b=h.CreateLambda(b);var c=this;return new e(function(){var f,g,i=0;return new j(function(){f=c.GetEnumerator(),g=e.From(a).GetEnumerator()},function(){return f.MoveNext()&&g.MoveNext()?this.Yield(b(f.Current(),g.Current(),i++)):d},function(){try{h.Dispose(f)}finally{h.Dispose(g)}})})},Join:function(a,g,i,k,l){g=h.CreateLambda(g),i=h.CreateLambda(i),k=h.CreateLambda(k),l=h.CreateLambda(l);var m=this;return new e(function(){var n,o,p=c,q=0;return new j(function(){n=m.GetEnumerator(),o=e.From(a).ToLookup(i,f.Identity,l)},function(){for(;b;){if(p!=c){var a=p[q++];if(void 0!==a)return this.Yield(k(n.Current(),a));a=c,q=0}if(!n.MoveNext())return d;var e=g(n.Current());p=o.Get(e).ToArray()}},function(){h.Dispose(n)})})},GroupJoin:function(a,b,g,i,k){b=h.CreateLambda(b),g=h.CreateLambda(g),i=h.CreateLambda(i),k=h.CreateLambda(k);var l=this;return new e(function(){var m=l.GetEnumerator(),n=c;return new j(function(){m=l.GetEnumerator(),n=e.From(a).ToLookup(g,f.Identity,k)},function(){if(m.MoveNext()){var a=n.Get(b(m.Current()));return this.Yield(i(m.Current(),a))}return d},function(){h.Dispose(m)})})},All:function(a){a=h.CreateLambda(a);var c=b;return this.ForEach(function(b){return a(b)?void 0:(c=d,d)}),c},Any:function(a){a=h.CreateLambda(a);var c=this.GetEnumerator();try{if(0==arguments.length)return c.MoveNext();for(;c.MoveNext();)if(a(c.Current()))return b;return d}finally{h.Dispose(c)}},Concat:function(a){var b=this;return new e(function(){var f,g;return new j(function(){f=b.GetEnumerator()},function(){if(g==c){if(f.MoveNext())return this.Yield(f.Current());g=e.From(a).GetEnumerator()}return g.MoveNext()?this.Yield(g.Current()):d},function(){try{h.Dispose(f)}finally{h.Dispose(g)}})})},Insert:function(a,c){var f=this;return new e(function(){var g,i,k=0,l=d;return new j(function(){g=f.GetEnumerator(),i=e.From(c).GetEnumerator()},function(){return k==a&&i.MoveNext()?(l=b,this.Yield(i.Current())):g.MoveNext()?(k++,this.Yield(g.Current())):!l&&i.MoveNext()?this.Yield(i.Current()):d},function(){try{h.Dispose(g)}finally{h.Dispose(i)}})})},Alternate:function(a){return a=e.Return(a),this.SelectMany(function(b){return e.Return(b).Concat(a)}).TakeExceptLast()},Contains:function(a,c){c=h.CreateLambda(c);var e=this.GetEnumerator();try{for(;e.MoveNext();)if(c(e.Current())===a)return b;return d}finally{h.Dispose(e)}},DefaultIfEmpty:function(a){var c=this;return new e(function(){var e,f=b;return new j(function(){e=c.GetEnumerator()},function(){return e.MoveNext()?(f=d,this.Yield(e.Current())):f?(f=d,this.Yield(a)):d},function(){h.Dispose(e)})})},Distinct:function(a){return this.Except(e.Empty(),a)},Except:function(a,b){b=h.CreateLambda(b);var c=this;return new e(function(){var f,g;return new j(function(){f=c.GetEnumerator(),g=new o(b),e.From(a).ForEach(function(a){g.Add(a)})},function(){for(;f.MoveNext();){var a=f.Current();if(!g.Contains(a))return g.Add(a),this.Yield(a)}return d},function(){h.Dispose(f)})})},Intersect:function(a,b){b=h.CreateLambda(b);var c=this;return new e(function(){var f,g,i;return new j(function(){f=c.GetEnumerator(),g=new o(b),e.From(a).ForEach(function(a){g.Add(a)}),i=new o(b)},function(){for(;f.MoveNext();){var a=f.Current();if(!i.Contains(a)&&g.Contains(a))return i.Add(a),this.Yield(a)}return d},function(){h.Dispose(f)})})},SequenceEqual:function(a,c){c=h.CreateLambda(c);var f=this.GetEnumerator();try{var g=e.From(a).GetEnumerator();try{for(;f.MoveNext();)if(!g.MoveNext()||c(f.Current())!==c(g.Current()))return d;return g.MoveNext()?d:b}finally{h.Dispose(g)}}finally{h.Dispose(f)}},Union:function(a,b){b=h.CreateLambda(b);var c=this;return new e(function(){var f,g,i;return new j(function(){f=c.GetEnumerator(),i=new o(b)},function(){var b;if(void 0===g){for(;f.MoveNext();)if(b=f.Current(),!i.Contains(b))return i.Add(b),this.Yield(b);g=e.From(a).GetEnumerator()}for(;g.MoveNext();)if(b=g.Current(),!i.Contains(b))return i.Add(b),this.Yield(b);return d},function(){try{h.Dispose(f)}finally{h.Dispose(g)}})})},OrderBy:function(a){return new l(this,a,d)},OrderByDescending:function(a){return new l(this,a,b)},Reverse:function(){var a=this;return new e(function(){var b,c;return new j(function(){b=a.ToArray(),c=b.length},function(){return c>0?this.Yield(b[--c]):d},f.Blank)})},Shuffle:function(){var a=this;return new e(function(){var b;return new j(function(){b=a.ToArray()},function(){if(b.length>0){var a=Math.floor(Math.random()*b.length);return this.Yield(b.splice(a,1)[0])}return d},f.Blank)})},GroupBy:function(a,b,f,g){var i=this;return a=h.CreateLambda(a),b=h.CreateLambda(b),f!=c&&(f=h.CreateLambda(f)),g=h.CreateLambda(g),new e(function(){var e;return new j(function(){e=i.ToLookup(a,b,g).ToEnumerable().GetEnumerator()},function(){for(;e.MoveNext();)return f==c?this.Yield(e.Current()):this.Yield(f(e.Current().Key(),e.Current()));return d},function(){h.Dispose(e)})})},PartitionBy:function(a,f,g,i){var k=this;a=h.CreateLambda(a),f=h.CreateLambda(f),i=h.CreateLambda(i);var l;return g==c?(l=d,g=function(a,b){return new q(a,b)}):(l=b,g=h.CreateLambda(g)),new e(function(){var c,m,n,o=[];return new j(function(){c=k.GetEnumerator(),c.MoveNext()&&(m=a(c.Current()),n=i(m),o.push(f(c.Current())))},function(){for(var h;(h=c.MoveNext())==b&&n===i(a(c.Current()));)o.push(f(c.Current()));if(o.length>0){var j=l?g(m,e.From(o)):g(m,o);return h?(m=a(c.Current()),n=i(m),o=[f(c.Current())]):o=[],this.Yield(j)}return d},function(){h.Dispose(c)})})},BufferWithCount:function(a){var b=this;return new e(function(){var c;return new j(function(){c=b.GetEnumerator()},function(){for(var b=[],e=0;c.MoveNext();)if(b.push(c.Current()),++e>=a)return this.Yield(b);return b.length>0?this.Yield(b):d},function(){h.Dispose(c)})})},Aggregate:function(a,b,c){return this.Scan(a,b,c).Last()},Average:function(a){a=h.CreateLambda(a);var b=0,c=0;return this.ForEach(function(d){b+=a(d),++c}),b/c},Count:function(a){a=a==c?f.True:h.CreateLambda(a);var b=0;return this.ForEach(function(c,d){a(c,d)&&++b}),b},Max:function(a){return a==c&&(a=f.Identity),this.Select(a).Aggregate(function(a,b){return a>b?a:b})},Min:function(a){return a==c&&(a=f.Identity),this.Select(a).Aggregate(function(a,b){return b>a?a:b})},MaxBy:function(a){return a=h.CreateLambda(a),this.Aggregate(function(b,c){return a(b)>a(c)?b:c})},MinBy:function(a){return a=h.CreateLambda(a),this.Aggregate(function(b,c){return a(b)<a(c)?b:c})},Sum:function(a){return a==c&&(a=f.Identity),this.Select(a).Aggregate(0,function(a,b){return a+b})},ElementAt:function(a){var c,e=d;if(this.ForEach(function(f,g){return g==a?(c=f,e=b,d):void 0}),!e)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return c},ElementAtOrDefault:function(a,c){var e,f=d;return this.ForEach(function(c,g){return g==a?(e=c,f=b,d):void 0}),f?e:c},First:function(a){if(a!=c)return this.Where(a).First();var e,f=d;if(this.ForEach(function(a){return e=a,f=b,d}),!f)throw new Error("First:No element satisfies the condition.");return e},FirstOrDefault:function(a,e){if(e!=c)return this.Where(e).FirstOrDefault(a);var f,g=d;return this.ForEach(function(a){return f=a,g=b,d}),g?f:a},Last:function(a){if(a!=c)return this.Where(a).Last();var e,f=d;if(this.ForEach(function(a){f=b,e=a}),!f)throw new Error("Last:No element satisfies the condition.");return e},LastOrDefault:function(a,e){if(e!=c)return this.Where(e).LastOrDefault(a);var f,g=d;return this.ForEach(function(a){g=b,f=a}),g?f:a},Single:function(e){if(e!=c)return this.Where(e).Single();var f,g=d;if(this.ForEach(function(c){if(g)throw new Error(a);g=b,f=c}),!g)throw new Error("Single:No element satisfies the condition.");return f},SingleOrDefault:function(e,f){if(f!=c)return this.Where(f).SingleOrDefault(e);var g,h=d;return this.ForEach(function(c){if(h)throw new Error(a);h=b,g=c}),h?g:e},Skip:function(a){var b=this;return new e(function(){var c,e=0;return new j(function(){for(c=b.GetEnumerator();e++<a&&c.MoveNext(););},function(){return c.MoveNext()?this.Yield(c.Current()):d},function(){h.Dispose(c)})})},SkipWhile:function(a){a=h.CreateLambda(a);var c=this;return new e(function(){var e,f=0,g=d;return new j(function(){e=c.GetEnumerator()},function(){for(;!g;){if(e.MoveNext()){if(!a(e.Current(),f++))return g=b,this.Yield(e.Current());continue}return d}return e.MoveNext()?this.Yield(e.Current()):d},function(){h.Dispose(e)})})},Take:function(a){var b=this;return new e(function(){var c,e=0;return new j(function(){c=b.GetEnumerator()},function(){return e++<a&&c.MoveNext()?this.Yield(c.Current()):d},function(){h.Dispose(c)})})},TakeWhile:function(a){a=h.CreateLambda(a);var b=this;return new e(function(){var c,e=0;return new j(function(){c=b.GetEnumerator()},function(){return c.MoveNext()&&a(c.Current(),e++)?this.Yield(c.Current()):d},function(){h.Dispose(c)})})},TakeExceptLast:function(a){a==c&&(a=1);var b=this;return new e(function(){if(0>=a)return b.GetEnumerator();var c,e=[];return new j(function(){c=b.GetEnumerator()},function(){for(;c.MoveNext();){if(e.length==a)return e.push(c.Current()),this.Yield(e.shift());e.push(c.Current())}return d},function(){h.Dispose(c)})})},TakeFromLast:function(a){if(0>=a||a==c)return e.Empty();var b=this;return new e(function(){var f,g,i=[];return new j(function(){f=b.GetEnumerator()},function(){for(;f.MoveNext();)i.length==a&&i.shift(),i.push(f.Current());return g==c&&(g=e.From(i).GetEnumerator()),g.MoveNext()?this.Yield(g.Current()):d},function(){h.Dispose(g)})})},IndexOf:function(a){var d=c;return this.ForEach(function(c,e){return c===a?(d=e,b):void 0}),d!==c?d:-1},LastIndexOf:function(a){var b=-1;return this.ForEach(function(c,d){c===a&&(b=d)}),b},ToArray:function(){var a=[];return this.ForEach(function(b){a.push(b)}),a},ToLookup:function(a,b,c){a=h.CreateLambda(a),b=h.CreateLambda(b),c=h.CreateLambda(c);var d=new o(c);return this.ForEach(function(c){var e=a(c),f=b(c),g=d.Get(e);void 0!==g?g.push(f):d.Add(e,[f])}),new p(d)},ToObject:function(a,b){a=h.CreateLambda(a),b=h.CreateLambda(b);var c={};return this.ForEach(function(d){c[a(d)]=b(d)}),c},ToDictionary:function(a,b,c){a=h.CreateLambda(a),b=h.CreateLambda(b),c=h.CreateLambda(c);var d=new o(c);return this.ForEach(function(c){d.Add(a(c),b(c))}),d},ToJSON:function(a,b){return JSON.stringify(this.ToArray(),a,b)},ToString:function(a,b){return a==c&&(a=""),b==c&&(b=f.Identity),this.Select(b).ToArray().join(a)},Do:function(a){var b=this;return a=h.CreateLambda(a),new e(function(){var c,e=0;return new j(function(){c=b.GetEnumerator()},function(){return c.MoveNext()?(a(c.Current(),e++),this.Yield(c.Current())):d},function(){h.Dispose(c)})})},ForEach:function(a){a=h.CreateLambda(a);var b=0,c=this.GetEnumerator();try{for(;c.MoveNext()&&a(c.Current(),b++)!==d;);}finally{h.Dispose(c)}},Write:function(a,e){a==c&&(a=""),e=h.CreateLambda(e);var f=b;this.ForEach(function(b){f?f=d:document.write(a),document.write(e(b))})},WriteLine:function(a){a=h.CreateLambda(a),this.ForEach(function(b){document.write(a(b)),document.write("<br />")})},Force:function(){var a=this.GetEnumerator();try{for(;a.MoveNext(););}finally{h.Dispose(a)}},Let:function(a){a=h.CreateLambda(a);var b=this;return new e(function(){var c;return new j(function(){c=e.From(a(b)).GetEnumerator()},function(){return c.MoveNext()?this.Yield(c.Current()):d},function(){h.Dispose(c)})})},Share:function(){var a,b=this;return new e(function(){return new j(function(){a==c&&(a=b.GetEnumerator())},function(){return a.MoveNext()?this.Yield(a.Current()):d},f.Blank)})},MemoizeAll:function(){var a,b,g=this;return new e(function(){var e=-1;return new j(function(){b==c&&(b=g.GetEnumerator(),a=[])},function(){return e++,a.length<=e?b.MoveNext()?this.Yield(a[e]=b.Current()):d:this.Yield(a[e])},f.Blank)})},Catch:function(a){a=h.CreateLambda(a);var b=this;return new e(function(){var c;return new j(function(){c=b.GetEnumerator()},function(){try{return c.MoveNext()?this.Yield(c.Current()):d}catch(b){return a(b),d}},function(){h.Dispose(c)})})},Finally:function(a){a=h.CreateLambda(a);var b=this;return new e(function(){var c;return new j(function(){c=b.GetEnumerator()},function(){return c.MoveNext()?this.Yield(c.Current()):d},function(){try{h.Dispose(c)}finally{a()}})})},Trace:function(a,b){return a==c&&(a="Trace"),b=h.CreateLambda(b),this.Do(function(c){console.log(a,":",b(c))})}};var f={Identity:function(a){return a},True:function(){return b},Blank:function(){}},g={Boolean:typeof b,Number:"number",String:"string",Object:typeof{},Undefined:"undefined",Function:"function"},h={CreateLambda:function(a){if(a==c)return f.Identity;if(typeof a==g.String){if(""==a)return f.Identity;if(-1==a.indexOf("=>"))return new Function("$,$$,$$$,$$$$","return "+a);var b=a.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);return new Function(b[1],"return "+b[2])}return a},IsIEnumerable:function(a){if(typeof Enumerator!=g.Undefined)try{return new Enumerator(a),b}catch(c){}return d},Compare:function(a,b){return a===b?0:a>b?1:-1},Dispose:function(a){a!=c&&a.Dispose()}},i={Before:0,Running:1,After:2},j=function(a,c,e){var f=new k,g=i.Before;this.Current=f.Current,this.MoveNext=function(){try{switch(g){case i.Before:g=i.Running,a();case i.Running:return c.apply(f)?b:(this.Dispose(),d);case i.After:return d}}catch(e){throw this.Dispose(),e}},this.Dispose=function(){if(g==i.Running)try{e()}finally{g=i.After}}},k=function(){var a=c;this.Current=function(){return a},this.Yield=function(c){return a=c,b}},l=function(a,b,c,d){var e=this;e.source=a,e.keySelector=h.CreateLambda(b),e.descending=c,e.parent=d};l.prototype=new e,l.prototype.CreateOrderedEnumerable=function(a,b){return new l(this.source,a,b,this)},l.prototype.ThenBy=function(a){return this.CreateOrderedEnumerable(a,d)},l.prototype.ThenByDescending=function(a){return this.CreateOrderedEnumerable(a,b)},l.prototype.GetEnumerator=function(){var a,b,e=this,g=0;return new j(function(){a=[],b=[],e.source.ForEach(function(c,d){a.push(c),b.push(d)});var d=m.Create(e,c);d.GenerateKeys(a),b.sort(function(a,b){return d.Compare(a,b)})},function(){return g<b.length?this.Yield(a[b[g++]]):d},f.Blank)};var m=function(a,b,d){var e=this;e.keySelector=a,e.descending=b,e.child=d,e.keys=c};m.Create=function(a,b){var d=new m(a.keySelector,a.descending,b);return a.parent!=c?m.Create(a.parent,d):d},m.prototype.GenerateKeys=function(a){for(var b=this,d=a.length,e=b.keySelector,f=new Array(d),g=0;d>g;g++)f[g]=e(a[g]);b.keys=f,b.child!=c&&b.child.GenerateKeys(a)},m.prototype.Compare=function(a,b){var d=this,e=h.Compare(d.keys[a],d.keys[b]);if(0==e){if(d.child!=c)return d.child.Compare(a,b);e=h.Compare(a,b)}return d.descending?-e:e};var n=function(a){this.source=a};n.prototype=new e,n.prototype.Any=function(a){return a==c?this.source.length>0:e.prototype.Any.apply(this,arguments)},n.prototype.Count=function(a){return a==c?this.source.length:e.prototype.Count.apply(this,arguments)},n.prototype.ElementAt=function(a){return a>=0&&a<this.source.length?this.source[a]:e.prototype.ElementAt.apply(this,arguments)},n.prototype.ElementAtOrDefault=function(a,b){return a>=0&&a<this.source.length?this.source[a]:b},n.prototype.First=function(a){return a==c&&this.source.length>0?this.source[0]:e.prototype.First.apply(this,arguments)},n.prototype.FirstOrDefault=function(a,b){return b!=c?e.prototype.FirstOrDefault.apply(this,arguments):this.source.length>0?this.source[0]:a},n.prototype.Last=function(a){var b=this;return a==c&&b.source.length>0?b.source[b.source.length-1]:e.prototype.Last.apply(b,arguments)},n.prototype.LastOrDefault=function(a,b){var d=this;return b!=c?e.prototype.LastOrDefault.apply(d,arguments):d.source.length>0?d.source[d.source.length-1]:a},n.prototype.Skip=function(a){var b=this.source;return new e(function(){var c;return new j(function(){c=0>a?0:a},function(){return c<b.length?this.Yield(b[c++]):d},f.Blank)})},n.prototype.TakeExceptLast=function(a){return a==c&&(a=1),this.Take(this.source.length-a)},n.prototype.TakeFromLast=function(a){return this.Skip(this.source.length-a)},n.prototype.Reverse=function(){var a=this.source;return new e(function(){var b;return new j(function(){b=a.length},function(){return b>0?this.Yield(a[--b]):d},f.Blank)})},n.prototype.SequenceEqual=function(a,b){return(a instanceof n||a instanceof Array)&&b==c&&e.From(a).Count()!=this.Count()?d:e.prototype.SequenceEqual.apply(this,arguments)},n.prototype.ToString=function(a,b){return b==c&&this.source instanceof Array?(a==c&&(a=""),this.source.join(a)):e.prototype.ToString.apply(this,arguments)},n.prototype.GetEnumerator=function(){var a=this.source,b=0;return new j(f.Blank,function(){return b<a.length?this.Yield(a[b++]):d},f.Blank)};var o=function(){var a=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},h=function(a){return a===c?"null":void 0===a?"undefined":typeof a.toString===g.Function?a.toString():Object.prototype.toString.call(a)},i=function(a,b){var d=this;d.Key=a,d.Value=b,d.Prev=c,d.Next=c},k=function(){this.First=c,this.Last=c};k.prototype={AddLast:function(a){var b=this;b.Last!=c?(b.Last.Next=a,a.Prev=b.Last,b.Last=a):b.First=b.Last=a},Replace:function(a,b){a.Prev!=c?(a.Prev.Next=b,b.Prev=a.Prev):this.First=b,a.Next!=c?(a.Next.Prev=b,b.Next=a.Next):this.Last=b},Remove:function(a){a.Prev!=c?a.Prev.Next=a.Next:this.First=a.Next,a.Next!=c?a.Next.Prev=a.Prev:this.Last=a.Prev}};var l=function(a){var b=this;b.count=0,b.entryList=new k,b.buckets={},b.compareSelector=a==c?f.Identity:a};return l.prototype={Add:function(b,c){var d=this,e=d.compareSelector(b),f=h(e),g=new i(b,c);if(a(d.buckets,f)){for(var j=d.buckets[f],k=0;k<j.length;k++)if(d.compareSelector(j[k].Key)===e)return d.entryList.Replace(j[k],g),void(j[k]=g);j.push(g)}else d.buckets[f]=[g];d.count++,d.entryList.AddLast(g)},Get:function(b){var c=this,d=c.compareSelector(b),e=h(d);if(!a(c.buckets,e))return void 0;for(var f=c.buckets[e],g=0;g<f.length;g++){var i=f[g];if(c.compareSelector(i.Key)===d)return i.Value}return void 0},Set:function(c,e){var f=this,g=f.compareSelector(c),j=h(g);if(a(f.buckets,j))for(var k=f.buckets[j],l=0;l<k.length;l++)if(f.compareSelector(k[l].Key)===g){var m=new i(c,e);return f.entryList.Replace(k[l],m),k[l]=m,b}return d},Contains:function(c){var e=this,f=e.compareSelector(c),g=h(f);if(!a(e.buckets,g))return d;for(var i=e.buckets[g],j=0;j<i.length;j++)if(e.compareSelector(i[j].Key)===f)return b;return d},Clear:function(){this.count=0,this.buckets={},this.entryList=new k},Remove:function(b){var c=this,d=c.compareSelector(b),e=h(d);if(a(c.buckets,e))for(var f=c.buckets[e],g=0;g<f.length;g++)if(c.compareSelector(f[g].Key)===d)return c.entryList.Remove(f[g]),f.splice(g,1),0==f.length&&delete c.buckets[e],void c.count--},Count:function(){return this.count},ToEnumerable:function(){var a=this;return new e(function(){var b;return new j(function(){b=a.entryList.First},function(){if(b!=c){var a={Key:b.Key,Value:b.Value};return b=b.Next,this.Yield(a)}return d},f.Blank)})}},l}(),p=function(a){var b=this;b.Count=function(){return a.Count()},b.Get=function(b){return e.From(a.Get(b))},b.Contains=function(b){return a.Contains(b)},b.ToEnumerable=function(){return a.ToEnumerable().Select(function(a){return new q(a.Key,a.Value)})}},q=function(a,b){this.Key=function(){return a},n.call(this,b)};return q.prototype=new n,e}();