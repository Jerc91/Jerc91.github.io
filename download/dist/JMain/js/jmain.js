'use strict';(function(){function w(c){function d(c){var d=this===window?{}:this;c&&c.indexOf('.')&&c.split('.').forEach((function(b){d=d.addNS(b)}))}return d.prototype.addNS=function(b,a){if(b)return b.match(window.validateNS)?('undefined'==typeof this[b]&&(a&&!a.hasOwnProperty('addNS')?(a.addNS=d.prototype.addNS,this[b]=a):this[b]=new d),this[b]):void 0},c?(c.hasOwnProperty('addNS')||(c.addNS=d.prototype.addNS),c):new d}function x(i,a){for(var j,c=window,d=i.split('.'),e=d.length,f=e-1,g=0;g<e;g++)j=c,c=c[d[g]];return a&&(j[d[f]]=null,delete j[d[f]]),c}function y(i){var a,b,k,d,e,f=i||location.search,g=f.indexOf('?');if(-1==f.indexOf('?'))return{};a=f.substr(g+1).split('&'),e=a.length,b={};for(var h=0;h<e;++h)k=a[h].substring(0,a[h].indexOf('=')),d=a[h].substring(a[h].indexOf('=')+1,a[h].length),b[k]=decodeURIComponent(d.replace(/\+/g,' '));return b}function c(){function h(){let b=arguments.length;for(let c=0;c<b;c++)arguments[c]=arguments[c]instanceof Array?Promise.all(arguments[c].map((a)=>a instanceof Array?h(...a):h(a))):a(arguments[c]);return 1==b?arguments[0]:Promise.all(arguments)}function a(c){return c instanceof Promise?c:(++f,i.sendRequest(c,b))}function b(h){let i,b,j;if(++g,h&&h.fragment&&(B(h,e,n),n=!1),e.hasChildNodes()&&g==f){i=e.querySelectorAll('[data-j-parent]'),b=i.length;for(let c=0;c<b;c++)j=document.querySelector(i[c].dataset.jParent),j&&(j.firstElementChild?j.firstElementChild.replaceWith(i[c]):j.appendChild(i[c]));o.appendChild(e)}}let c=arguments.length,l=arguments,e=document.createDocumentFragment(),f=0,g=0,n=!0;return new Promise(function(a,e){h(...l).then((function(){a(...arguments)}),(c)=>{let a={error:c.error};return d(m)&&j(m,a),e(a)})})}function z(i,a,k,c){var d=i.result instanceof Blob&&!/blob|text/.test(a.mime),m={request:a,response:d?URL.createObjectURL(i.result):i.result},f=/^css|js$/gi.exec(i.ext);if(f&&d)A({href:m.response,type:f[0],name:a.src,repeatTag:a.repeatTag,referenceTag:a.referenceTag,addFragment:(d)=>{let a=document.createDocumentFragment();a.appendChild(d),m.fragment=a,c(m)}}).then((function(){j(l,m),k(m)}));else{if((m.request.query||m.request.noAppend)&&!m.request.noFragment){let b=g(m.response);Object.assign(m,{fragment:b}),m.request.noAppend||c(m)}else c(m);j(l,m),k(m)}}function e(d,e){let b;return'string'==typeof d||d instanceof String?{src:d.toString(),useFS:jr.useFileSystem}:e?(b=JSON.parse(JSON.stringify(d)),b.useFS=jr.useFileSystem,b):(reqest.useFS=jr.useFileSystem,d)}function A(c={}){return new Promise(function(a,b){var d,e,f,g;if(!c.repeatTag&&c.referenceTag){var h=('js'==c.type?'script':'link')+'[data-name="'+c.name+'"]';document.querySelector(h)&&a({})}switch(c.type){case'js':d=document.createElement('script'),d.src=c.href,d.async=!0;break;case'css':d=document.createElement('link'),d.href=c.href,d.rel='stylesheet';}c.referenceTag&&(f=c.name,g=f.indexOf('?'),-1<g&&(f=f.substring(0,g)),d.dataset.name=f),c.name&&(e=y(c.name),Object.keys(e).forEach((b)=>d.setAttribute(b,e[b]))),d.addEventListener('load',a,!1),d.addEventListener('error',b,!1),c.addFragment?c.addFragment(d):o.appendChild(d)})}function B(f,a,b){var c=a?a.querySelector(f.request.query):void 0,g=f.request.query;f.fragment&&(c&&c.firstElementChild?currentNode.replaceWith(f.fragment):c&&!c.firstElementChild?c.appendChild(f.fragment):!c&&g&&b?(f.fragment.firstElementChild.dataset.jParent=g,a.appendChild(f.fragment)):c||!g||b?o.appendChild(f.fragment):(c=document.querySelector(g),c.firstElementChild?c.firstElementChild.replaceWith(f.fragment):c.appendChild(f.fragment)))}function g(b){return document.createRange().createContextualFragment(b)}function d(b){return'[object Function]'==Object.prototype.toString.call(b)}function f(){var d,a=arguments.length;if(1<a){d=[];for(var b=1;b<a;b++)d[d.length]=arguments[b]}return d}function j(c){var a=f(...arguments);if(d(c))return a?c(...a):c(a)}function h(){}var i,k,l,m,n='assets/config/filesToUpdate.json',b='dvContainerJGet',o=document.querySelector(`#${b}`)||document.createElement('div'),p=new w,q=0;window.jr=new w(function(d){var a={filesUpdatePath:n,getToWindow:!0,useFS:!1,workersCount:0};return Object.assign(a,d),jr.useFileSystem=a.useFS,jr.useFileSystem&&(i=jr.fileSystem,window.addEventListener('load',(function(){window.applicationCache.addEventListener('updateready',(function(){window.applicationCache.status==window.applicationCache.UPDATEREADY&&(window.applicationCache.swapCache(),window.location.reload())}),!1)}),!1)),jr.filesUpdatePath=a.filesUpdatePath||n,k=a.cbStartRequest||k,l=a.cbEndRequest||l,m=a.cbErrorRequest||m,q=a.workersCount,Object.defineProperty(jr,'workersCount',{set:(b)=>{q=b,q||i.deleteWorkers()},get:()=>q}),a.getToWindow&&(window.get=c),i.init().then((function(){return c({src:jr.filesUpdatePath,cache:!1}).then((function(b){jr.filesToUpdate=b.response}),(function(b){h(b.error),jr.filesToUpdate=[]})).then((function(){if(a.packages)return jr.service=p.serviceLocator,jr.service(a.packages)}))}))}),Promise.prototype.spread||(Promise.prototype.spread=function(c){return this.then((function(a){return a instanceof Array?c(...a):c(a)}))}),function(){function l(){function e(b){f.observador.notify(b.data.observedId,b).remove(b.data.observedId)}let f;return c.size<jr.workersCount&&(f=new Worker(jr.requesterWorkerPath),f.observador=p.observer,f.addEventListener('message',e,!1),f.addEventListener('error',e,!1),c.set(c.size,f)),d>=c.size&&(d=0),f=c.get(d),d++,f}function f(g,i){let c=e(g,!0);return new Promise(function(b,a){var d,e;d=p.command.on('message',z).on('error',a),e=l(),c.observedId=e.observador.add((function(c){d.trigger(c.type,c.data,g,b,i)})),j(k,c),e.postMessage(Object.assign({files:jr.filesToUpdate},c))}).then((function(b){return j(g.then,b),b}),(function(b){return c.error=b,j(g.catch,c),Promise.reject(c)}))}function m(){return b?Promise.resolve(b):navigator.serviceWorker.getRegistration().then((c)=>b=c)}var b,c=new Map,d=0,a=!1;this.sendRequest=function(c,h){if(jr.workersCount)return f(c,h);let d=e(c,!0);return new Promise(function(e,a){m().then((function(b){var c=new MessageChannel;c.port1.onmessage=function(b){return'string'==typeof b.data?(h(),void a(b.data)):void z(b.data,d,e,h)},j(k,d),b.active.postMessage(Object.assign({files:jr.filesToUpdate},d),[c.port2])}))}).then((function(a){return j(c.then,a),a}),(function(a){return d.error=a,j(c.catch,d),Promise.reject(d)}))},this.deleteWorkers=function(){if(c&&c.size){let d=c.keys();for(let a of d)c.get(a).terminate(),c.delete(a)}},this.init=function(){return a?Promise.resolve():(a=!0,Promise.all([navigator.serviceWorker.register(jr.serviceWorkerPath,{scope:'./'}),navigator.serviceWorker.ready]).then((function(b){return jr.dev&&void 0,navigator.onLine?b[0].update():Promise.resolve()}),h).then((function(){navigator.serviceWorker.addEventListener('message',(function(){}))}),h))}}.call(jr.addNS('serviceWorker')),Array.prototype.sortBy=function(d){for(var a,b=this.length;b;)a=this[--b],this[b]=[].concat(d.call(a,a,b),a);this.sort((function(e,c){for(var a=0,b=e.length;a<b;++a)if(e[a]!=c[a])return e[a]<c[a]?-1:1;return 0}));for(var b=this.length;b;)this[--b]=this[b][this[b].length-1];return this},(function(){window.addEventListener('beforeinstallprompt',(function(b){b.userChoice.then((function(b){'dismissed'==b.outcome}))}))})(),function(){var e=this;(function(){function a(){var e={},a=this;return a.on=function(b,c){return e[b]=function(){return j(c,...arguments),a},a},a.off=function(b){return delete e[b],a},a.trigger=function(b){let c=f(...arguments)||[];return j(e[b],...c),a},a}Object.defineProperty(e,'command',{get:()=>new a})})(),(function(){function a(){var e=new Map,a=this;return a.add=function(a){var b=new g(a);return e.set(b.id,b),b.id},a.remove=function(b){return e.delete(b),a},a.notify=function(b){return e.has(b)&&e.get(b).update(...f(...arguments)),a},a}function g(c){this.update=function(){return j(c,...arguments),this},this.id=++b}var b=0;Object.defineProperty(e,'observer',{get:()=>new a})})(),(function(){function b(){function d(a){var b='string'==typeof a?a:a.name,f=g.get(b)||a;if(!f.paths)throw'Package does not have any path: '+a;return new Promise(function(a,e){var i,j;n.has(b)?i=Promise.resolve({response:n.get(b)}):(j=[],f.dependencies&&f.dependencies.forEach((a)=>{h.has(a)||(h.set(a,d(a)),j.push(h.get(a)))}),!h.has(f.name)&&h.set(f.name,Promise.all(j).then(()=>c(f.paths))),i=h.get(f.name)),i.then((function(c){var e=[];(g.has(b)?Promise.resolve():k([c.response])).then((function(){f=g.get(b),f.namespaces.forEach((function(b){e.push(x(b))})),n.set(b,e),a(e)}))}),e)})}function k(d){var e='string'==typeof d?c(d):Promise.resolve({response:d});return e.then((function(b){b.response instanceof Array||(b.response=[b.response]),b.response.forEach((b)=>{g.has(b.name)||g.set(b.name,{name:b.name,paths:b.paths,namespaces:b.namespaces,dependencies:b.dependencies})})}))}function b(a){return'string'==typeof a?/.+(\.|\/).+/.test(a)?k(a):d(a):'object'==typeof a?k(a):a instanceof Array?k(a):void 0}var e=this,n=new Map,g=new Map,h=new Map;return b.remove=function(b){var e='string'==typeof b?b:b.name,c=g.get(e)||b;return c&&(c.namespaces&&c.namespaces.forEach((b)=>x(b,!0)),c.paths&&c.paths.forEach((c)=>{var a=document.querySelector(`[data-name="${c}"]`);a&&a.parentNode.removeChild(a)})),n.delete(b),h.delete(b),Promise.resolve()},b}Object.defineProperty(p,'serviceLocator',{get:()=>new b})})(),this.addNS('singleton',(function(c,a){return c&&c.singletonInstance?c:d(a)?(c=a(),Object.defineProperty(c,{value:!0}),c.singletonInstance=!0,c):void 0}))}.call(p),jr.isFunction=d,jr.parametersWithoutFirst=f,jr.execFunction=j,jr.errorHandler=h,jr.getQuerys=y,jr.insertAfter=function(c,a){c.parentNode.insertBefore(a,c.nextSibling)},jr.deleteTag=function(b){b&&b.parentNode.removeChild(b)},jr.parseJsonDate=function(d){var a=6e4*new Date().getTimezoneOffset(),b=/\/Date\((-?\d+)([+-]\d{2})?(\d{2})?.*/.exec(d);return void 0==b[2]&&(b[2]=0),void 0==b[3]&&(b[3]=0),new Date(+b[1]+a+3.6e6*b[2]+6e4*b[3])},jr.now=function(){var b=new Date;return b.getFullYear()+'-'+(b.getMonth()+1)+'-'+(b.getDay()-1)+' '+b.getHours()+':'+b.getMinutes()},jr.namespace=w,jr.import=x,jr.replaceWith=B,jr.compileHTML=function(){function f(a){function b(d,a){var b='string'==typeof a.response;b?h[h.length]=a:Object.assign(d,a.response)}for(var h=[],c=jr.parametersWithoutFirst(...arguments)||[],d=c.length,e=0;e<d;e++)c[e]instanceof Array?c[e].forEach((b)=>{var c=f(a,b);c.length&&(h[h.length]=c)}):b(a,c[e]);return h}function e(c){var a=jr.parametersWithoutFirst(...arguments)||[],d=a.map((a)=>a instanceof Array?e(c,...a):b(c,a));return 1<a.length?Promise.all(d):d[0]}function b(e,f){return new Promise((b)=>{var c=new Worker('assets/js/workers/compiler-worker.js');c.addEventListener('message',(d)=>{c.terminate(),b(Object.assign(f,{response:d.data,fragment:g(d.data)}))},!1),c.postMessage({template:f.response,data:e})})}return get(...arguments).spread((function(){var a={};return e(a,...f(a,...arguments))}))},jr.get=c,jr.tagScriptLink=A,jr.patterns=p,jr.validateNS=/^[a-zA-Z]?[a-zA-z0-9]+$/,jr.countTags=0,jr.filesToUpdate=[],jr.ssl=-1<location.origin.indexOf('https'),jr.dev='localhost'===location.hostname||'127.0.0.1'===location.hostname,jr.lang=document.querySelector('html').getAttribute('lang'),(function(){var c=document.currentScript,a={useSW:!0};Object.assign(a,document.currentScript.dataset),jr.useFileSystem=a.useFS,jr.requesterWorkerPath=a.requesterWorkerPath||'assets/js/workers/requester-worker.js',jr.serviceWorkerPath=a.serviceWorkerPath||'./service-worker.js',i=jr.serviceWorker,i.init().then((function(){o.id||(o.id=b),A({href:c.dataset.init,type:'js'}),document.body.hasChildNodes(o)||document.body.appendChild(o)}),h)})()})(window);